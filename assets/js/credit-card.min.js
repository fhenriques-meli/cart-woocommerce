!function(w){"use strict";w(function(){var t=!1,u={site_id:wc_mercadopago_params.site_id,public_key:wc_mercadopago_params.public_key},n={discount_action_url:wc_mercadopago_params.discount_action_url,payer_email:wc_mercadopago_params.payer_email,default:wc_mercadopago_params.coupon_mode,status:!1},c={},r={};function e(){0!=document.getElementById("mp-card-number").value&&(document.getElementById("mp-card-number").value="",m(),y(),_(),g(),f())}function o(){var e=document.querySelector("#mp-frame-payments");w("#button-show-payments").on("click",function(){e.style.display="inline-block"==e.style.display?"none":"inline-block"})}function d(){return document.getElementById("mp-card-number").value.replace(/[ .-]/g,"").slice(0,6)}function a(){return(document.getElementById("mp-amount").value-document.getElementById("mp-discount").value)*document.getElementById("currency_ratio").value}function l(e,o){var t,n;200==e?(c=o[0],n=c.id,document.getElementById("paymentMethodId").value=n,t=c.secure_thumbnail,document.getElementById("mp-card-number").style.background="url("+t+") 98% 50% no-repeat #fff",function(e){r={issuer:!1,cardholder_name:!1,cardholder_identification_type:!1,cardholder_identification_number:!1};for(var o=0;o<e.length;o++)"issuer_id"==e[o]&&(r.issuer=!0),"cardholder_name"==e[o]&&(r.cardholder_name=!0),"cardholder_identification_type"==e[o]&&(r.cardholder_identification_type=!0),"cardholder_identification_number"==e[o]&&(r.cardholder_identification_number=!0)}(c.additional_info_needed),function(){r.issuer?(document.getElementById("mp-issuer-div").style.display="block",document.getElementById("installments-div").classList.remove("mp-col-md-12"),document.getElementById("installments-div").classList.add("mp-col-md-8"),Mercadopago.getIssuers(c.id,b)):(g(),v());r.cardholder_identification_type?(document.getElementById("mp-doc-div").style.display="inline-block",document.getElementById("mp-doc-type-div").style.display="block",Mercadopago.getIdentificationTypes()):document.getElementById("mp-doc-type-div").style.display="none";r.cardholder_identification_number?(document.getElementById("mp-doc-div").style.display="inline-block",document.getElementById("mp-doc-number-div").style.display="block"):document.getElementById("mp-doc-number-div").style.display="none";r.cardholder_identification_type||r.cardholder_identification_number||(document.getElementById("mp-doc-div").style.display="none")}()):document.getElementById("mp-card-number").innerHTML=""}function m(){document.getElementById("mp-card-number").style.background="no-repeat #fff"}function i(e){var o="";if("MLA"!=u.site_id)return o;for(var t=0;t<e.length;t++)-1!==e[t].indexOf("CFT_")&&(o='data-tax="'+e[t]+'"');return o}function p(e,o){if(200==e){for(var t=document.getElementById("mp-installments"),n="<option value='-1'>"+wc_mercadopago_params.choose+"...</option>",r=[],c=0;c<o.length;c++)"aggregator"==o[c].processing_mode&&(r=o[c].payer_costs);for(c=0;c<r.length;c++)n+="<option value='"+r[c].installments+"' "+i(r[c].labels)+">"+(r[c].recommended_message||r[c].installments)+"</option>";t.innerHTML=n,"MLA"==u.site_id&&(_(),w("body").on("change","#mp-installments",s))}else y(),_()}function s(){var e=document.querySelector("#mp-installments"),o=e.options[e.selectedIndex].getAttribute("data-tax"),t="",n="";if(null!=o){var r=o.split("|");t=r[0].replace("_"," "),n=r[1].replace("_"," "),"CFT 0,00%"==t&&"TEA 0,00%"==n&&(n=t="")}document.querySelector("#mp-tax-cft-text").innerHTML=t,document.querySelector("#mp-tax-tea-text").innerHTML=n}function y(){document.getElementById("mp-installments").innerHTML=""}function _(){document.querySelector("#mp-tax-cft-text").innerHTML="",document.querySelector("#mp-tax-tea-text").innerHTML=""}function g(){document.getElementById("mp-issuer-div").style.display="none",document.getElementById("installments-div").classList.remove("mp-col-md-8"),document.getElementById("installments-div").classList.add("mp-dis-md-12"),document.getElementById("mp-issuer").innerHTML=""}function f(){document.getElementById("mp-doc-div").style.display="none",document.getElementById("mp-doc-type-div").style.display="none",document.getElementById("docType").innerHTML="",document.getElementById("docNumber").value=""}function v(){for(var e={},o=a(),t=!1,n=0;n<c.additional_info_needed.length;n++)"issuer_id"==c.additional_info_needed[n]&&(t=!0);if(t){var r=document.getElementById("mp-issuer").value;if(e={bin:d(),amount:o,issuer_id:r},"-1"===r)return}else e={bin:d(),amount:o};Mercadopago.getInstallments(e,p)}function b(e,o){if(200==e){var t=document.getElementById("mp-issuer"),n=document.createDocumentFragment();t.options.length=0;var r=new Option(wc_mercadopago_params.choose+"...","-1");n.appendChild(r);for(var c=0;c<o.length;c++){var u="default"==o[c].name?"Otro":o[c].name;n.appendChild(new Option(u,o[c].id))}t.appendChild(n),t.removeAttribute("disabled"),w("body").on("change","#mp-issuer",v)}else g()}function h(){return document.querySelector("#mercadopago-form")}function S(){for(var e=h().querySelectorAll("[data-checkout]"),o=["cardNumber","cardExpirationDate","securityCode","installments"],t=0;t<e.length;t++){var n=e[t];if(-1<o.indexOf(n.getAttribute("data-checkout"))&&(-1==n.value||""==n.value))return n.focus(),void E()}return 0==c.length?(document.getElementById("mp-card-number").focus(),void E()):function(){if(r.issuer){var e=document.getElementById("mp-issuer");if(-1==e.value||""==e.value)return void e.focus()}if(r.cardholder_name){var o=document.getElementById("mp-card-holder-name");if(-1==o.value||""==o.value)return void o.focus()}if(r.cardholder_identification_type){var t=document.getElementById("docType");if(-1==t.value||""==t.value)return void docType.focus()}if(r.cardholder_identification_number){var n=document.getElementById("docNumber");if(-1==n.value||""==n.value)return void n.focus()}return 1}()||void E()}function q(){!function(){for(var e=0;e<document.querySelectorAll("[data-checkout]").length;e++){var o=document.querySelectorAll("[data-checkout]")[e];o.classList.remove("mp-error-input"),o.classList.remove("mp-form-control-error")}for(e=0;e<document.querySelectorAll(".mp-error").length;e++){document.querySelectorAll(".mp-error")[e].style.display="none"}}(),document.querySelector("#mp-box-loading").style.background="url("+wc_mercadopago_params.loading+") 0 50% no-repeat #fff";var e=h();return Mercadopago.createToken(e,k),!1}function E(){0<w("form#order_review").length&&w(".blockOverlay").css("display","none")}function k(e,o){(document.querySelector("#mp-box-loading").style.background="",200!=e&&201!=e)?(function(e){for(var o=h(),t=0;t<e.cause.length;t++){var n=e.cause[t];if(208==n.code||209==n.code||325==n.code||326==n.code)var r=o.querySelector("#mp-error-208");else r=o.querySelector("#mp-error-"+n.code);if(null!=r){var c=o.querySelector(r.getAttribute("data-main"));r.style.display="inline-block",c.classList.add("mp-form-control-error")}}}(o),E()):(document.querySelector("#token").value=o.id,t=!0,w("form.checkout, form#order_review").submit())}function C(){e(),document.querySelector("#mpCouponApplyed").style.display="none",""==document.querySelector("#couponCode").value?(n.status=!1,document.querySelector("#mpCouponError").style.display="block",document.querySelector("#mpCouponError").innerHTML=wc_mercadopago_params.coupon_empty,document.querySelector("#couponCode").style.background=null,document.querySelector("#applyCoupon").value=wc_mercadopago_params.apply,document.querySelector("#mp-discount").value=0):n.status?(n.status=!1,document.querySelector("#mpCouponError").style.display="none",document.querySelector("#applyCoupon").style.background=null,document.querySelector("#applyCoupon").value=wc_mercadopago_params.apply,document.querySelector("#couponCode").value="",document.querySelector("#couponCode").style.background=null,document.querySelector("#mp-discount").value=0):(document.querySelector("#mpCouponError").style.display="none",document.querySelector("#couponCode").style.background="url("+wc_mercadopago_params.loading+") 98% 50% no-repeat #fff",document.querySelector("#couponCode").style.border="1px solid #cecece",document.querySelector("#applyCoupon").disabled=!0,function(){var e=n.discount_action_url,o="?";0<=e.indexOf("?")&&(o="&");e+=o+"site_id="+wc_mercadopago_params.site_id,e+="&coupon_id="+document.querySelector("#couponCode").value,e+="&amount="+document.querySelector("#mp-amount").value,e+="&payer="+n.payer_email,w.ajax({url:e,method:"GET",timeout:5e3,error:function(){n.status=!1,document.querySelector("#mpCouponApplyed").style.display="none",document.querySelector("#mpCouponError").style.display="none",document.querySelector("#applyCoupon").style.background=null,document.querySelector("#applyCoupon").value=wc_mercadopago_params.apply,document.querySelector("#couponCode").value="",document.querySelector("#couponCode").style.background=null,document.querySelector("#mp-discount").value=0},success:function(e,o){200==e.status?(n.status=!0,document.querySelector("#mpCouponApplyed").style.display="block",document.querySelector("#mp-discount").value=e.response.coupon_amount,document.querySelector("#mpCouponApplyed").innerHTML=wc_mercadopago_params.discount_info1+" <strong>"+I(e.response.currency_id)+" "+Math.round(100*e.response.coupon_amount)/100+"</strong> "+wc_mercadopago_params.discount_info2+" "+e.response.name+".<br>"+wc_mercadopago_params.discount_info3+" <strong>"+I(e.response.currency_id)+" "+Math.round(100*document.querySelector("#mp-amount").value)/100+"</strong><br>"+wc_mercadopago_params.discount_info4+" <strong>"+I(e.response.currency_id)+" "+Math.round(100*a())/100+"*</strong><br><i>"+wc_mercadopago_params.discount_info5+"</i><br><a href='https://api.mercadolibre.com/campaigns/"+e.response.id+"/terms_and_conditions?format_type=html' target='_blank'>"+wc_mercadopago_params.discount_info6+"</a>",document.querySelector("#mpCouponError").style.display="none",document.querySelector("#couponCode").style.background=null,document.querySelector("#couponCode").style.background="url("+wc_mercadopago_params.check+") 94% 50% no-repeat #fff",document.querySelector("#couponCode").style.border="1px solid #cecece",document.querySelector("#applyCoupon").value=wc_mercadopago_params.remove,document.querySelector("#campaign_id").value=e.response.id,document.querySelector("#campaign").value=e.response.name):(n.status=!1,document.querySelector("#mpCouponApplyed").style.display="none",document.querySelector("#mpCouponError").style.display="block",document.querySelector("#mpCouponError").innerHTML=e.response.message,document.querySelector("#couponCode").style.background=null,document.querySelector("#couponCode").style.background="url("+wc_mercadopago_params.error+") 94% 50% no-repeat #fff",document.querySelector("#applyCoupon").value=wc_mercadopago_params.apply,document.querySelector("#mp-discount").value=0),document.querySelector("#applyCoupon").disabled=!1}})}())}function I(e){return"ARS"==e?"$":"BRL"==e?"R$":"COP"==e||"CLP"==e||"MXN"==e?"$":"VEF"==e?"Bs":"PEN"==e?"S/":"UYU"==e?"$U":"$"}function B(){return t?!(t=!1):!document.getElementById("payment_method_woo-mercado-pago-custom").checked||!!S()&&q()}0<w("form#order_review").length&&("yes"==wc_mercadopago_params.coupon_mode&&w("#applyCoupon").on("click",C),o(),Mercadopago.setPublishableKey(u.public_key)),w("body").on("updated_checkout",function(){"yes"==wc_mercadopago_params.coupon_mode&&w("#applyCoupon").on("click",C),e(),Mercadopago.setPublishableKey(u.public_key),o()}),w("body").on("focusout","#mp-card-number",function(e){g(),y(),_(),f();var o=d();if(o.length<6)return void m();"keyup"==e.type?6<=o.length&&Mercadopago.getPaymentMethod({bin:o},l):setTimeout(function(){6<=o.length&&Mercadopago.getPaymentMethod({bin:o},l)},100)}),w("form.checkout").on("checkout_place_order_woo-mercado-pago-custom",function(){return B()}),w("form#order_review").submit(function(){return B()})})}(jQuery);